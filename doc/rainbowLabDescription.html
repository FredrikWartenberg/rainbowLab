<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Fredrik Wartenberg" />

<meta name="date" content="2019-01-12" />

<title>rainbowLab Description</title>






<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">rainbowLab Description</h1>
<h4 class="author"><em>Fredrik Wartenberg</em></h4>
<h4 class="date"><em>2019-01-12</em></h4>



<p>RainbowLab is a tool to simulate the mechanisms behind the formation of rainbows. The approach is based on tracing rays of light through a drop of water and recording the differences between incident and exiting angle. The tool allows to 3D render the traced rays as well as evaluating the angular differences by means of a number of graphs. In its standard usage the parameters to be varied are the order of rainbows, the number of colors traced and the angular resolution/granulatriy of the the incident rays.</p>
<div id="rainbowlab-ray-tracing-model" class="section level2">
<h2>rainbowLab Ray Tracing Model</h2>
<p>The ray tracing model of rainbowLab is based on tracing a number of rays through a water drop. For this, number of light rays (<code>ray</code>) over a range of incident angles are generated by a light source <code>arcLight</code> and traced through a <code>drop</code> defined by its radius <code>R</code>, its origin <code>O</code> and its refractive index <code>refractiveIndex</code>. A ray entering the drop will be expanded into a number of initially parallel rays differing in their assigned wavelength. The wavelenght assignment is made by the <code>spectralize</code> function. Rays are traced through the drop based on a geomteric optics model. Attenuation of the rays is modelled by <code>fresnel</code> coefficients.</p>
<div id="visualising-tracing-of-light-rays" class="section level3">
<h3>Visualising tracing of light rays</h3>
<p>To visualise ray tracing through a water drop, use the function <code>traceOneRay()</code> without any parameters. To alter the settings check the documentation <code>?traceOneRay</code>.</p>
</div>
</div>
<div id="analysing-the-formation-of-rainbows" class="section level2">
<h2>Analysing the formation of rainbows</h2>
<p>rainbowLab allows to analyse the formation of rainbows, notably * The angels under which rainbows of different orders can be observed * The effects of dispersion related to different wavelengths * The relative intensities of the rainbows of different orders * The width of rainbows of different orders</p>
<div id="data-types" class="section level3">
<h3>Data Types</h3>
<div id="raydata" class="section level4">
<h4>rayData</h4>
<p><code>rayData</code> is a table (in <code>data.table</code> format) representing each ray traced amongst others in terms of rainbow number (<code>rainbowNo</code>), wavelength in nm (<code>lambda</code>), intensity (<code>I</code>) and angular deviation (difference between incident and exting angle in degrees (<code>angDDeg</code>). <code>rayData</code> is generated using <code>rayData &lt;- generateRainbows()</code></p>
</div>
<div id="pdfdata" class="section level4">
<h4>pdfData</h4>
<p><code>pdfData</code> is aggregated data over all rays traced. <code>pdfData</code> is organized as tidy-data table (in <code>data.table</code> format) with the categories <code>rainbowNo</code>, <code>lambda</code> and angular bins <code>angD</code>. For each category combination the intensity <code>I</code> is given. The intensity is obtained by summing up all intensities per category from <code>rayData</code> (using <code>pdfData &lt;- aggregateData(rayData)</code>.</p>
</div>
</div>
<div id="workflow" class="section level3">
<h3>Workflow</h3>
<ol style="list-style-type: decimal">
<li>Generate rayData</li>
<li>Aggregate rayData to a probability density distribution/function (PDF)</li>
<li>Plot results</li>
</ol>
<p>When using the highlevel function <code>generateRainbows()</code> all these steps will be exectuted within the function call.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
